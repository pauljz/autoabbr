!function(a){"use strict";var b,c,d,e,f,h,i,j,l,m;m={defTag:"abbr",attrKey:"data-definition",attrDef:"title",addClass:"definition",includeWord:"true",onComplete:null},a.fn.autoabbr=function(c){var e=this;a.extend(m,c),b={},m.words&&(b=m.words),m.src?a.get(m.src,function(c){a.extend(b,c),d(e)},"json"):d(e)},d=function(a){i(),f(a),"function"==typeof m.onComplete&&m.onComplete.call(a)},i=function(){var a={};for(var c in b)b.hasOwnProperty(c)&&j(c,a,0);h=a},j=function(a,b,c){var d=b[a[c]]||{};a[c+1]?j(a,d,c+1):d.word=!0,b[a[c]]=d},f=function(b){var c,d,g,h;for(g=b.children(),c=0,d=g.length;c<d;c++)f(a(g[c]));for(h=b.contents(),c=0,d=h.length;c<d;c++)3===h[c].nodeType&&e(h[c])},e=function(a){var b,d,e,f=[],g=a.nodeValue,i=h,j="",k="";for(b=0,d=g.length;b<d;b++)e=g[b].toLowerCase(),i.hasOwnProperty(e)?(i=i[e],j+=e):e.match(/^\W$/)?(i.word&&f.push({i:b,word:j,key:k||j}),k="",j="",i=h):i.hasOwnProperty("*")?(i={"*":!0,word:!0},k||(k=j+"*"),j+=e):i={};i.word&&f.push({i:b,word:j,key:k||j}),f.length&&c(a,f)},c=function(a,b){var c,d,e,f,g,h,i=[],j=0,k=a.nodeValue;for(g=0,h=b.length;g<h;g++)c=b[g],i.push({type:"text",text:k.slice(j,c.i-c.word.length)}),i.push({type:"word",text:k.slice(c.i-c.word.length,c.i),word:c.key}),j=c.i;for(i.push({type:"text",text:k.slice(j)}),d=a.parentNode,e=a.nextSibling,d.removeChild(a),g=0,h=i.length;g<h;g++)f=l(i[g]),null!==f&&d.insertBefore(f,e)},l=function(a){var c,d;return a.text&&0!==a.text.length?(a.word?(c=document.createElement(m.defTag),c.innerHTML=a.text,m.attrDef&&(d=b[a.word],m.includeWord&&(d=a.text+": "+d),c.setAttribute(m.attrDef,d)),m.attrKey&&c.setAttribute(m.attrKey,a.word),m.addClass&&(c.className=m.addClass)):c=document.createTextNode(a.text),c):null}}(jQuery);